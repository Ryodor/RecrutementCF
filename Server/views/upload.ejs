<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
</head>
<body>
<h1><%= title %></h1>
<form id="uploadFileForm" action="/upload" method="post">
    Select file to upload(json online):
    <input type="file" name="fileToUpload" id="fileToUpload">
    <input type="submit" value="Upload file" name="submit">
</form>
<div id="output"></div>
<script>
    var form = document.getElementById("uploadFileForm");
    form.addEventListener('submit', function(ev) {

        var oData = new FormData(document.getElementById("uploadFileForm")),
            oOutput = document.getElementById("output");


        var oReq = new XMLHttpRequest();
        oReq.open("POST", "/upload", true);
        oReq.onload = function(oEvent) {
            if (oReq.status == 200) {
                oOutput.innerHTML = oReq.responseText;
            } else {
                oOutput.innerHTML = "Error " + oReq.status + " occurred uploading your file.<br \/>"+oReq.responseText;
            }
        };

        oReq.send(oData);
        ev.preventDefault();
    }, false);
</script>
</body>
</html>
